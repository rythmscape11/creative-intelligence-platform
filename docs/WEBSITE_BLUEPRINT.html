<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aureon One - Technical Blueprint</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            color: #24292f;
        }
        @media print {
            body { max-width: 100%; padding: 0; }
            .no-print { display: none; }
        }
        h1, h2, h3 { border-bottom: 1px solid #eaecef; padding-bottom: .3em; }
        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; margin-top: 24px; }
        h3 { font-size: 1.25em; margin-top: 24px; }
        table { border-collapse: collapse; width: 100%; margin: 1em 0; }
        th, td { border: 1px solid #dfe2e5; padding: 6px 13px; }
        
        tr:nth-child(2n) { background-color: #f6f8fa; }
        blockquote { border-left: .25em solid #dfe2e5; color: #6a737d; padding: 0 1em; margin: 0; }
        code { padding: .2em .4em; margin: 0; font-size: 85%; background-color: rgba(27,31,35,.05); border-radius: 6px; }
        pre { padding: 16px; overflow: auto; line-height: 1.45; background-color: #f6f8fa; border-radius: 6px; }
        pre code { background-color: transparent; }
        .mermaid { text-align: center; }
        
        /* Alert styles */
        blockquote:has(strong:contains("IMPORTANT")) { border-left-color: #8957e5; background: #f8f6fc; }
        blockquote:has(strong:contains("NOTE")) { border-left-color: #0969da; background: #eef5fe; }
        blockquote:has(strong:contains("TIP")) { border-left-color: #1a7f37; background: #effbf2; }
        blockquote:has(strong:contains("CAUTION")) { border-left-color: #d1242f; background: #ffeef0; }
    </style>
</head>
<body>
    <div class="no-print" style="margin-bottom: 2rem; padding: 1rem; background: #f1f8ff; border: 1px solid #c8e1ff; border-radius: 6px;">
        <strong>üñ®Ô∏è Printing Instructions:</strong> Press <kbd>Cmd/Ctrl + P</kbd> to print or save as PDF. The diagrams below will render automatically.
    </div>
    <div id="content"></div>

    <script>
        const markdown = `
# üöÄ Aureon One ‚Äî Technical & Investment Blueprint

<div align="center">

**The AI-Powered Marketing Operating System**

*Unifying Strategy ‚Ä¢ Analytics ‚Ä¢ Optimization ‚Ä¢ Execution*

---

**Document Version:** 3.2 | **Last Updated:** December 12, 2025

</div>

---

## üìä Executive Summary

### The Opportunity

**Aureon One** is a comprehensive AI-powered marketing operating system designed for agencies and brands. We're positioned at the intersection of three $100B+ markets: **Marketing Technology**, **AI/ML Services**, and **Creative Automation**.

> [!IMPORTANT]
> **Market Timing:** With 73% of marketers now using AI tools and the MarTech industry projected to reach $350B by 2027, Aureon One captures the shift from fragmented point solutions to unified AI platforms.

### üí∞ Key Investment Highlights

| Metric | Value | Significance |
|--------|-------|--------------|
| **Product Modules** | 6 Core Products | Full-stack marketing suite |
| **Completion Status** | 75% Built | Significant dev investment complete |
| **API Endpoints** | 43+ Groups | Enterprise-ready architecture |
| **Database Models** | 88+ Tables | Scalable data infrastructure |
| **Free Lead Magnets** | 33 Tools | Built-in acquisition funnel |
| **Revenue Streams** | 3 Models | SaaS + Usage + API marketplace |

### üéØ Target Market

| Segment | Size | Our Product |
|---------|------|-------------|
| **Marketing Agencies** | $400B global | Agency OS, Strategiser |
| **SMB Marketers** | 30M+ businesses | Growth Suite, Tools |
| **Creative Teams** | $50B content market | Aureon Forge |
| **Enterprise Brands** | Fortune 500 | Full Platform + API |

### üèÜ Competitive Advantages

1. **Unified Platform** ‚Äî Unlike point solutions (HubSpot, Hootsuite, SEMrush), we offer end-to-end coverage
2. **AI-Native** ‚Äî Built from ground-up with AI, not bolted on
3. **Developer-First API** ‚Äî Monetizable ecosystem via Forge Public API
4. **Multi-Revenue Model** ‚Äî SaaS subscriptions + usage-based Sparks + API marketplace


---

## üõ†Ô∏è Technology Infrastructure

> [!NOTE]
> **Enterprise-Grade Stack:** Built on modern, scalable technologies trusted by Fortune 500 companies.

### Core Technologies

| Layer | Technology | Why It Matters |
|-------|------------|----------------|
| **Framework** | Next.js 16 + React 19 | Latest stable versions, SSR/SSG ready |
| **Language** | TypeScript 5 | Type safety, reduced bugs |
| **Database** | PostgreSQL (Neon) | Serverless, auto-scaling |
| **ORM** | Prisma 5 | 88+ models, type-safe queries |
| **Auth** | Clerk | Enterprise SSO ready |
| **Cache** | Redis | Sub-ms response times |

### ü§ñ AI/ML Integrations (Revenue Drivers)

| Provider | Capability | Revenue Model | Status |
|----------|------------|---------------|--------|
| **OpenAI GPT-4** | Strategy generation | Included in SaaS | ‚úÖ Live |
| **Google Gemini** | Copilot & insights | Included in SaaS | ‚úÖ Live |
| **Fal.ai Flux** | Image generation | Sparks (usage-based) | ‚úÖ Live |
| **Runway Gen-3** | Cinema video | Sparks (premium) | ‚úÖ Live |
| **Kling AI** | Social video | Sparks (standard) | ‚úÖ Live |

### üîê API Configuration System (Operational Excellence)

**Dynamic key management** allows instant provider switching without redeployment:

- **AES-256-GCM Encryption** ‚Äî Bank-grade security for API keys
- **Hot-swap Capable** ‚Äî Change providers in 30 seconds
- **Fallback System** ‚Äî Zero downtime during transitions

---

## 3. Module Breakdown ‚Äî Functional vs Non-Functional

### 3.1 Agency OS (\`/agency\`)

**Purpose:** Project management, client workspaces, approvals, asset management

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/agency\` | ‚úÖ Functional | Real-time KPIs from Prisma DB |
| Clients | \`/agency/clients\` | ‚úÖ Functional | CRUD operations, client profiles |
| Projects | \`/agency/projects\` | ‚úÖ Functional | Project creation, status tracking |
| Tasks | \`/agency/tasks\` | ‚úÖ Functional | Kanban board, priority management |
| Assets | \`/agency/assets\` | ‚úÖ Functional | File storage, tagging |
| Gantt Chart | \`/agency/gantt\` | ‚úÖ Functional | Full API binding to tasks/projects |
| Content Calendar | \`/agency/content-calendar\` | ‚úÖ Functional | Fetches from API, event management |
| Time Tracker | \`/agency/time-tracker\` | ‚úÖ Functional | localStorage persistence, real stats |
| Workload | \`/agency/workload\` | ‚ö†Ô∏è UI Only | Resource planning mockup |
| Ads Manager | \`/agency/ads\` | ‚ùå Mock Data | No real ad platform integration |
| Client Portal | \`/agency/portal\` | ‚ö†Ô∏è Partial | UI exists, approval workflow incomplete |
| Reports | \`/agency/reports\` | ‚úÖ Functional | Fetches metrics from API |
| AI Studio | \`/agency/ai-studio\` | ‚úÖ Functional | Smart AI assistant with built-in responses |
| Automations | \`/agency/automations\` | ‚ùå Not Implemented | Placeholder page |
| Integrations | \`/agency/integrations\` | ‚ùå Not Implemented | Placeholder page |

**Investment to Complete:** ~$8,000‚Äì15,000 (60‚Äì120 dev hours) ‚Äî *Reduced: 5 features now functional*

---

### 3.2 The Strategiser (\`/strategiser\`)

**Purpose:** AI-powered marketing strategy generation

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/strategiser\` | ‚úÖ Functional | Real Prisma queries for strategy counts |
| Create Strategy | \`/dashboard/strategies/create\` | ‚úÖ Functional | Full AI strategy generation |
| Strategy List | \`/dashboard/strategies\` | ‚úÖ Functional | CRUD, filtering, search |
| Templates | \`/strategiser/templates\` | ‚úÖ Functional | Pre-built strategy templates |
| AI Copilot | \`/strategiser/copilot\` | ‚úÖ Functional | Gemini AI integration with marketing expert |
| Channel Mix | \`/strategiser/channel-mix\` | ‚úÖ Functional | Budget allocation calculator |
| Personas | \`/strategiser/personas\` | ‚úÖ Functional | Full CRUD with localStorage persistence |
| Insights | \`/strategiser/insights\` | ‚úÖ Functional | AI-generated insights via Gemini API |
| Reports | \`/strategiser/reports\` | ‚ö†Ô∏è Partial | Export to PDF/PPTX works |

**Investment to Complete:** ~$3,000‚Äì5,000 (20‚Äì40 dev hours) ‚Äî *Reduced: Module 90% complete*

---

### 3.3 The Analyser (\`/analyser\`)

**Purpose:** SEO, SEM, competitor intelligence, GEO engine

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/analyser\` | ‚ö†Ô∏è Mock Data | Overview with static metrics |
| SEO Audit | \`/analyser/audit\` | ‚ö†Ô∏è Partial | Basic page analysis, limited depth |
| Keywords | \`/analyser/keywords\` | ‚ö†Ô∏è UI Only | Keyword research UI, no API |
| Backlinks | \`/analyser/backlinks\` | ‚ùå Not Implemented | Placeholder |
| Competitors | \`/analyser/competitors\` | ‚ö†Ô∏è Partial | Basic competitor comparison |
| GEO Engine | \`/analyser/geo\` | ‚ö†Ô∏è Partial | AI content optimization, limited |
| Content Gap | \`/analyser/content-gap\` | ‚ùå Not Implemented | Placeholder |
| On-Page | \`/analyser/onpage\` | ‚ö†Ô∏è UI Only | Suggestions UI, no implementation |
| SERP | \`/analyser/serp\` | ‚ö†Ô∏è UI Only | SERP preview, no live data |
| Domain Overview | \`/analyser/domain\` | ‚ö†Ô∏è UI Only | Domain analysis mockup |
| Traffic | \`/analyser/traffic\` | ‚ùå Not Implemented | Would need Analytics API |

**Investment to Complete:** ~$25,000‚Äì40,000 (200‚Äì320 dev hours)
*Requires third-party API subscriptions (Ahrefs/SEMrush/DataForSEO)*

---

### 3.4 The Optimiser (\`/optimizer\`)

**Purpose:** Campaign optimization and AI-driven performance insights

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/optimizer\` | ‚úÖ Functional | Connection prompts, no fake data |
| Campaigns | \`/optimizer/campaigns\` | ‚ö†Ô∏è UI Only | Campaign list, no ad platform data |
| Connections | \`/optimizer/connections\` | ‚ùå Not Implemented | Ad platform OAuth |
| Creative Intel | \`/optimizer/creative-intel\` | ‚ùå Not Implemented | Would need ad platform access |
| Experiments | \`/optimizer/experiments\` | ‚ö†Ô∏è UI Only | A/B test framework UI |
| Automations | \`/optimizer/automations\` | ‚ùå Not Implemented | Rule-based optimization |
| AI Copilot | \`/optimizer/copilot\` | ‚ö†Ô∏è Partial | Chat interface exists |
| Reports | \`/optimizer/reports\` | ‚ö†Ô∏è UI Only | Report templates |

**Investment to Complete:** ~$30,000‚Äì50,000 (240‚Äì400 dev hours)
*Requires Facebook/Google/LinkedIn Ads API partnerships*

---

### 3.5 Aureon Forge (\`/forge\`)

**Purpose:** Visual automation, AI content generation, public API

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/forge\` | ‚úÖ Functional | Real-time stats from API |
| Flow Editor | \`/forge/flows\` | ‚úÖ Functional | Visual node-based editor |
| Flow Runs | \`/forge/flows/[id]\` | ‚úÖ Functional | Execution history, logs |
| API Keys | \`/forge/api-keys\` | ‚úÖ Functional | Key generation, permissions |
| Brand Kits | \`/forge/brand-kits\` | ‚ö†Ô∏è Partial | UI complete, LoRA training needs work |
| Pipelines | \`/forge/pipelines\` | ‚ö†Ô∏è UI Only | Pipeline templates |
| Logs | \`/forge/logs\` | ‚ö†Ô∏è UI Only | Execution log viewer |
| Matrix Generator | Via Flows | ‚úÖ Functional | 4x4 A/B image grid |
| BrandGuard | Service Layer | ‚úÖ Functional | Prompt rewriting, compliance |
| Public API | \`/api/public/v1/*\` | ‚úÖ Functional | REST API with key auth |

**Investment to Complete:** ~$10,000‚Äì15,000 (80‚Äì120 dev hours)

---

### 3.6 Free Marketing Tools (\`/tools\`)

**Purpose:** Lead magnet tools for user acquisition

| Category | Tools | Status |
|----------|-------|--------|
| **SEO** (7) | Keyword Research, SERP Preview, Schema Generator, Robots.txt, Sitemap, Backlink Checker, Page Speed | ‚úÖ All Functional (client-side) |
| **Content** (8) | Headline Analyzer, Readability Scorer, Meta Descriptions, Keyword Density, Social Captions, Ad Copy, Blog Ideas, Content Repurposer | ‚úÖ All Functional |
| **Social** (6) | UTM Builder, Hashtag Generator, Best Time to Post, Engagement Calculator, Image Resizer, Social Audit | ‚úÖ All Functional |
| **Email** (4) | Spam Score Checker, Signature Generator, Email Preview, List Segmentation | ‚úÖ All Functional |
| **Advertising** (5) | ROI Calculator, CPM Calculator, CPC Optimizer, Budget Allocator, Ad Copy Generator | ‚úÖ All Functional |
| **Calculators** (3) | Marketing Budget, Growth Projector, CAC Calculator | ‚úÖ All Functional |

**Status:** All 33 tools are functional (client-side calculation, no external APIs needed)

---

### 3.7 Growth Suite (\`/growth-suite\`)

**Purpose:** Advanced analytics and experimentation platform

| Feature | Route | Status | Description |
|---------|-------|--------|-------------|
| Dashboard | \`/growth-suite\` | ‚ö†Ô∏è Mock Data | Overview metrics |
| Attribution | \`/growth-suite/attribution\` | ‚ùå Not Implemented | Would need tracking setup |
| Heatmaps | \`/growth-suite/heatmaps\` | ‚ùå Not Implemented | Would need tracking JS |
| Experiments | \`/growth-suite/experiments\` | ‚úÖ Functional | Full CRUD, localStorage, live stats |
| Competitors | \`/growth-suite/competitors\` | ‚ö†Ô∏è Partial | Basic competitor comparison |
| Repurposer | \`/growth-suite/repurposer\` | ‚úÖ Functional | AI-powered via Gemini API |
| Widgets | \`/growth-suite/widgets\` | ‚ùå Not Implemented | Embeddable widgets |

**Investment to Complete:** ~$20,000‚Äì35,000 (160‚Äì280 dev hours)

---

## üí∞ Revenue Model & Unit Economics

> [!IMPORTANT]
> **3 Revenue Streams:** Diversified monetization reduces risk and maximizes LTV.

### Revenue Stream 1: Platform SaaS (Recurring)

| Tier | MRR | ARR | Target |
|------|-----|-----|--------|
| **FREE** | $0 | $0 | Lead gen funnel |
| **PRO** | $49 | $490* | Freelancers, solo marketers |
| **AGENCY** | $299 | $2,980* | 5-20 person agencies |
| **ENTERPRISE** | Custom | $10K+ | Fortune 500, large brands |

*17% yearly discount applied

### Revenue Stream 2: Aureon Forge (Usage-Based)

**Sparks Credit System** ‚Äî Predictable, scalable consumption model:

| Tier | MRR | Sparks/mo | Effective Rate |
|------|-----|-----------|----------------|
| **Freelancer** | $49 | 5,000 | $0.0098/Spark |
| **Studio** | $199 | 25,000 | $0.0080/Spark |
| **Agency** | $999 | 150,000 | $0.0067/Spark |

### üìà Unit Economics (Gross Margin per Action)

| Action | Provider | COGS | Revenue | **Gross Margin** |
|--------|----------|------|---------|------------------|
| Image (Standard) | Fal.ai | $0.03 | $0.05 | **40%** |
| Image (LoRA) | Fal.ai | $0.05 | $0.10 | **50%** |
| Video (Cinema) | Runway | $0.50 | $0.75 | **33%** |
| Video (Social) | Kling | $0.28 | $0.40 | **30%** |
| LLM Prompt | Vertex AI | $0.001 | $0.01 | **900%** |

> [!TIP]
> **Blended gross margin of ~45-60%** depending on usage mix, with LLM prompts providing exceptional margin.

---

## üìä Investment Required to Complete

### Development Investment

| Module | Completion | Hours Remaining | Investment |
|--------|------------|-----------------|------------|
| **Agency OS** | 80% ‚úÖ | 60‚Äì120 | $8K‚Äì15K |
| **Strategiser** | 95% ‚úÖ | 20‚Äì40 | $3K‚Äì5K |
| **Forge** | 85% ‚úÖ | 80‚Äì120 | $10K‚Äì15K |
| **Growth Suite** | 45% | 120‚Äì200 | $15K‚Äì25K |
| **Analyser** | 30% | 200‚Äì320 | $25K‚Äì40K |
| **Optimizer** | 30% | 220‚Äì380 | $28K‚Äì48K |

| | **Low** | **High** |
|--|---------|----------|
| **Total Hours** | 700 | 1,180 |
| **Total Investment** | **$89,000** | **$148,000** |
| **Timeline** | 4-6 months | 8-10 months |

> [!CAUTION]
> **Analyser & Optimizer** require third-party API partnerships (Ahrefs, SEMrush, Facebook Ads API, Google Ads API) which add recurring costs.

### Operational Costs (At Scale)

| Category | Monthly Low | Monthly High |
|----------|-------------|--------------|
| **Infrastructure** | $91 | $830 |
| **AI APIs** (usage-based) | $3,200 | $14,000 |
| **Total Burn** | **$3,291** | **$14,830** |

**Break-even:** ~70 Agency tier subscribers OR ~670 Pro subscribers (blended)

---

## 6. Technical Debt & Known Issues

### 6.1 Critical Issues
| Issue | Location | Impact | Priority |
|-------|----------|--------|----------|
| Mock data in dashboards | ~~Agency, Strategiser~~ Analyser | Most dashboards now real | MEDIUM |
| Missing API integrations | Optimizer (Ads), Analyser (SEO) | Core features unusable | HIGH |
| No payment backend | Pricing page | Can't collect payments | HIGH |

### 6.2 Medium Priority
| Issue | Location | Impact |
|-------|----------|--------|
| Incomplete brand kit LoRA | Forge | Can't train custom models |
| No real-time notifications | Agency | Users not notified |
| Missing email service | Various | No transactional emails |

### 6.3 Low Priority / Enhancement
| Issue | Location | Impact |
|-------|----------|--------|
| ~~Gantt chart not bound to data~~ | ~~Agency~~ | ‚úÖ Fixed |
| ~~Time tracker not persisting~~ | ~~Agency~~ | ‚úÖ Fixed |
| Mobile responsiveness gaps | Various pages | Poor mobile UX |

---

## 7. Directory Structure

\`\`\`
src/
‚îú‚îÄ‚îÄ app/                           # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/              # Protected routes
‚îÇ   ‚îú‚îÄ‚îÄ agency/                   # 18 subpages
‚îÇ   ‚îú‚îÄ‚îÄ analyser/                 # 17 subpages
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # 43 API groups
‚îÇ   ‚îú‚îÄ‚îÄ forge/                    # 5 subpages
‚îÇ   ‚îú‚îÄ‚îÄ growth-suite/             # 7 subpages
‚îÇ   ‚îú‚îÄ‚îÄ optimizer/                # 8 subpages
‚îÇ   ‚îú‚îÄ‚îÄ strategiser/              # 9 subpages
‚îÇ   ‚îú‚îÄ‚îÄ tools/                    # 33 free tools
‚îÇ   ‚îî‚îÄ‚îÄ ...                       # Other routes
‚îú‚îÄ‚îÄ components/                    # 30+ groups
‚îú‚îÄ‚îÄ lib/services/                  # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ api-config.service.ts     # Centralized API key management (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ encryption.service.ts     # AES-256 key encryption (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ forge/                    # 10 Forge services
‚îÇ   ‚îî‚îÄ‚îÄ strategy/                 # Strategy generation
‚îú‚îÄ‚îÄ config/                        # Pricing configs
‚îî‚îÄ‚îÄ prisma/schema.prisma          # 88+ models
\`\`\`

---

## 8. Environment Variables Required

\`\`\`env
# Core
DATABASE_URL=postgresql://...
NEXT_PUBLIC_APP_URL=https://aureonone.com

# Auth (Clerk)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_...
CLERK_SECRET_KEY=sk_...

# AI Services
GOOGLE_AI_API_KEY=...
OPENAI_API_KEY=...
FAL_API_KEY=...          # Required for Forge images
RUNWAY_API_KEY=...       # Required for Forge video
KLING_API_KEY=...        # Required for Forge video

# Payments
RAZORPAY_KEY_ID=...
RAZORPAY_KEY_SECRET=...

# Encryption (for Admin API Config)
API_ENCRYPTION_KEY=...    # 32-char key for AES-256 encryption
# Or uses NEXTAUTH_SECRET as fallback

# Optional
RESEND_API_KEY=...       # For transactional emails
SENTRY_DSN=...           # Error tracking
\`\`\`

> **Note:** API keys (OPENAI, FAL, RUNWAY, KLING, etc.) can now be configured via Admin UI at \`/admin/api-config\` instead of environment variables.

---

## 9. Handover Checklists

### For Founders
- [ ] Review Section 4 (Pricing & Unit Economics)
- [ ] Review Section 5 (Investment Required)
- [ ] Decide which modules to prioritize
- [ ] Secure API partnerships (Fal.ai, Runway, Kling)

### For Lead Developer
- [ ] Set up local dev environment
- [ ] Review Section 3 (Functional/Non-Functional breakdown)
- [ ] Prioritize fixing HIGH priority technical debt
- [ ] Set up missing environment variables

### For Frontend Developer
- [ ] Review component library (\`src/components/ui/\`)
- [ ] Audit mobile responsiveness
- [ ] Replace mock data with real API calls
- [ ] Complete partially implemented UIs

### For Designer
- [ ] Design tokens: Gold \`#F1C40F\`, Red \`#B3001B\`, Dark \`#0A0A0A\`
- [ ] Review incomplete pages for design polish
- [ ] Create mobile-specific layouts where missing

### For DevOps
- [ ] Ensure all env vars are in Vercel
- [ ] Set up monitoring dashboards
- [ ] Configure Redis for session/caching
- [ ] Set up database backups

---

## 10. Key File Reference

| Purpose | File Path |
|---------|-----------|
| Homepage | \`src/app/page.tsx\` |
| Platform Pricing | \`src/config/pricing.ts\` |
| Forge Pricing | \`src/config/subscription-tiers.ts\` |
| Database Schema | \`prisma/schema.prisma\` |
| Strategy Generator | \`src/lib/services/strategy-processor.ts\` |
| Forge Services | \`src/lib/services/forge/\` |
| Header/Footer | \`src/components/layout/\` |
| UI Components | \`src/components/ui/\` |
| API Config Service | \`src/lib/services/api-config.service.ts\` |
| Encryption Service | \`src/lib/services/encryption.service.ts\` |
| Admin API Config UI | \`src/app/admin/api-config/page.tsx\` |
| Admin API Routes | \`src/app/api/admin/api-config/route.ts\` |

---

## 11. Product Workflows ‚Äî Frontend & Backend Architecture

### 11.1 Agency OS Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["/agency Dashboard"] --> B["API Calls"]
        C["/agency/clients"] --> B
        D["/agency/projects"] --> B
        E["/agency/tasks"] --> B
        F["/agency/gantt"] --> B
        G["/agency/time-tracker"] --> H["localStorage"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        B --> I["/api/agency/dashboard"]
        B --> J["/api/agency/clients"]
        B --> K["/api/agency/projects"]
        B --> L["/api/agency/tasks"]
    end
    
    subgraph Database["Database (Prisma)"]
        I --> M[(Client Model)]
        J --> M
        K --> N[(Project Model)]
        L --> O[(Task Model)]
        I --> N
        I --> O
    end
    
    subgraph External["External Services"]
        P["Clerk Auth"] --> B
        Q["AI Studio"] --> R["OpenAI/Gemini"]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| Dashboard | Real-time KPIs | \`/api/agency/dashboard\` | Client, Project, Task | Clerk |
| Clients | CRUD UI | \`/api/agency/clients\` | Client, Contact | ‚Äî |
| Projects | Kanban/List | \`/api/agency/projects\` | Project, Task | ‚Äî |
| Gantt | Timeline view | \`/api/agency/tasks\` | Task | ‚Äî |
| Time Tracker | Timer UI | localStorage | ‚Äî | ‚Äî |
| AI Studio | Chat interface | \`/api/agency/ai-studio\` | ‚Äî | OpenAI |

---

### 11.2 Strategiser Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["User Input Form"] --> B["Strategy Builder UI"]
        B --> C["Submit Strategy"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        C --> D["/api/strategies/create"]
        D --> E["Strategy Processor"]
        E --> F["OpenAI Service"]
        F --> G["GPT-4 API"]
    end
    
    subgraph Database["Database (Prisma)"]
        E --> H[(Strategy Model)]
        H --> I[(ChannelMix Model)]
        H --> J[(TargetAudience Model)]
    end
    
    subgraph Output["Output"]
        H --> K["PDF Export"]
        H --> L["PPTX Export"]
        H --> M["Dashboard Display"]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| Create Strategy | Multi-step form | \`/api/strategies/create\` | Strategy | OpenAI GPT-4 |
| Strategy List | DataTable | \`/api/strategies\` | Strategy | ‚Äî |
| AI Copilot | Chat UI | \`/api/strategiser/copilot\` | ‚Äî | Gemini AI |
| Personas | CRUD cards | localStorage | ‚Äî | ‚Äî |
| Insights | Cards display | \`/api/strategiser/insights\` | ‚Äî | Gemini AI |
| Export | Button click | \`/api/export/*\` | Strategy | ‚Äî |

---

### 11.3 Forge Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["Flow Editor"] --> B["Node Graph UI"]
        B --> C["Execute Flow"]
        D["API Key Manager"] --> E["Key CRUD"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        C --> F["/api/forge/execute"]
        F --> G["Flow Executor"]
        G --> H{"Action Type"}
    end
    
    subgraph Providers["AI Providers"]
        H -->|Image| I["Fal.ai Flux"]
        H -->|Video Cinema| J["Runway Gen-3"]
        H -->|Video Social| K["Kling AI"]
        H -->|Text| L["Google Gemini"]
    end
    
    subgraph Services["Service Layer"]
        M["ApiConfigService"] --> I
        M --> J
        M --> K
        M --> L
        N["BrandGuard"] --> G
        O["Sparks Tracker"] --> G
    end
    
    subgraph Database["Database"]
        G --> P[(Flow Model)]
        G --> Q[(FlowRun Model)]
        O --> R[(UserSparks Model)]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| Flow Editor | Node graph | \`/api/forge/flows\` | Flow, FlowNode | ‚Äî |
| Execute Flow | Run button | \`/api/forge/execute\` | FlowRun | Fal/Runway/Kling |
| Image Gen | Preview UI | \`/api/forge/generate/image\` | Generation | Fal.ai |
| Video Gen | Preview UI | \`/api/forge/generate/video\` | Generation | Runway/Kling |
| API Keys | Table UI | \`/api/forge/api-keys\` | ForgeApiKey | ‚Äî |
| BrandGuard | Auto-applied | Service layer | ‚Äî | ‚Äî |

---

### 11.4 Analyser Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["URL Input"] --> B["Audit Request"]
        C["Keyword Input"] --> D["Research Request"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        B --> E["/api/analyser/audit"]
        D --> F["/api/analyser/keywords"]
        E --> G["SEO Analyzer Service"]
        F --> H["Keyword Service"]
    end
    
    subgraph External["External APIs (Required)"]
        G -.->|Needed| I["DataForSEO/Ahrefs"]
        H -.->|Needed| I
        J["PageSpeed API"] --> G
    end
    
    subgraph Database["Database"]
        G --> K[(AuditResult Model)]
        H --> L[(Keyword Model)]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| SEO Audit | URL form | \`/api/analyser/audit\` | AuditResult | PageSpeed |
| Keywords | Input form | \`/api/analyser/keywords\` | Keyword | ‚ö†Ô∏è Not integrated |
| Backlinks | Table UI | \`/api/analyser/backlinks\` | ‚Äî | ‚ö†Ô∏è Not integrated |
| GEO Engine | Content editor | \`/api/analyser/geo\` | ‚Äî | Gemini AI |

---

### 11.5 Growth Suite Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["Experiment Builder"] --> B["Create Variant"]
        C["Content Input"] --> D["Repurpose Request"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        B --> E["/api/growth-suite/experiments"]
        D --> F["/api/growth-suite/repurpose"]
        F --> G["Gemini AI Service"]
    end
    
    subgraph Storage["Storage"]
        E --> H["localStorage"]
        G --> I["Response to UI"]
    end
    
    subgraph Output["Output Formats"]
        I --> J["Blog Post"]
        I --> K["Social Posts"]
        I --> L["Email Copy"]
        I --> M["Video Script"]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| Experiments | A/B test UI | localStorage | ‚Äî | ‚Äî |
| Repurposer | Content form | \`/api/growth-suite/repurpose\` | ‚Äî | Gemini AI |
| Attribution | ‚ö†Ô∏è UI only | ‚Äî | ‚Äî | ‚Äî |
| Heatmaps | ‚ö†Ô∏è UI only | ‚Äî | ‚Äî | ‚Äî |

---

### 11.6 Optimizer Workflow

\`\`\`mermaid
flowchart TB
    subgraph Frontend["Frontend (React)"]
        A["Campaign List"] --> B["View Campaigns"]
        C["Connect Platform"] --> D["OAuth Flow"]
    end
    
    subgraph Backend["Backend (API Routes)"]
        B -.->|Needed| E["/api/optimizer/campaigns"]
        D -.->|Needed| F["/api/optimizer/connect"]
    end
    
    subgraph External["Ad Platforms (Required)"]
        F -.->|Needed| G["Facebook Ads API"]
        F -.->|Needed| H["Google Ads API"]
        F -.->|Needed| I["LinkedIn Ads API"]
    end
    
    subgraph AI["AI Features"]
        J["AI Copilot"] --> K["OpenAI/Gemini"]
    end
\`\`\`

**Data Flow:**
| Feature | Frontend | Backend API | Database Model | External |
|---------|----------|-------------|----------------|----------|
| Campaigns | Table UI | ‚ö†Ô∏è Not integrated | ‚Äî | Ad platforms needed |
| Connections | OAuth buttons | ‚ö†Ô∏è Not integrated | ‚Äî | Platform OAuth |
| AI Copilot | Chat UI | \`/api/optimizer/copilot\` | ‚Äî | OpenAI |
| Experiments | A/B UI | ‚ö†Ô∏è UI only | ‚Äî | ‚Äî |

---

### 11.7 Admin API Configuration Workflow

\`\`\`mermaid
flowchart LR
    subgraph Admin["Admin UI (/admin/api-config)"]
        A["View All Keys"] --> B["Add/Update Key"]
        B --> C["Test Key"]
    end
    
    subgraph Backend["Backend"]
        B --> D["/api/admin/api-config POST"]
        C --> E["/api/admin/api-config/test"]
        D --> F["ApiConfigService"]
    end
    
    subgraph Security["Security Layer"]
        F --> G["EncryptionService"]
        G --> H["AES-256-GCM"]
    end
    
    subgraph Storage["Storage"]
        H --> I[(SiteSettings)]
        J["ENV Fallback"] --> F
    end
    
    subgraph Services["Consuming Services"]
        F --> K["Forge Providers"]
        F --> L["OpenAI Client"]
        F --> M["Email Service"]
    end
\`\`\`
`;
        
        document.getElementById('content').innerHTML = marked.parse(markdown);
        mermaid.init();
    </script>
</body>
</html>
